{"ast":null,"code":"import { BaseComponent } from \"../../../core/base.component\";\nimport moment from \"moment\";\nimport { DetailComponent } from \"./detail/detail.component\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../core/auth/account.service\";\nimport * as i2 from \"@angular/cdk/clipboard\";\nimport * as i3 from \"../../../layout/common/data-table/data-table.component\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/icon\";\n\nfunction ScriptsComponent_ng_template_4_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ScriptsComponent_ng_template_4_ng_container_1_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const row_r2 = i0.ɵɵnextContext().row;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return ctx_r6.copyToClipboard(row_r2.script);\n    });\n    i0.ɵɵelement(2, \"mat-icon\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ScriptsComponent_ng_template_4_ng_container_1_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const row_r2 = i0.ɵɵnextContext().row;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return ctx_r9.viewDetail(row_r2);\n    });\n    i0.ɵɵelement(4, \"mat-icon\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction ScriptsComponent_ng_template_4_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"div\", 10);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    const column_r3 = ctx_r11.column;\n    const row_r2 = ctx_r11.row;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", column_r3.cellRenderer ? column_r3.cellRenderer(row_r2) : row_r2[column_r3.columnDef], i0.ɵɵsanitizeHtml);\n  }\n}\n\nfunction ScriptsComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0, 4);\n    i0.ɵɵtemplate(1, ScriptsComponent_ng_template_4_ng_container_1_Template, 5, 0, \"ng-container\", 5);\n    i0.ɵɵtemplate(2, ScriptsComponent_ng_template_4_ng_container_2_Template, 2, 1, \"ng-container\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const column_r3 = ctx.column;\n    i0.ɵɵproperty(\"ngSwitch\", column_r3.columnDef);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"option\");\n  }\n}\n\nexport let ScriptsComponent = /*#__PURE__*/(() => {\n  class ScriptsComponent extends BaseComponent {\n    constructor(injector, accountService, clipboard) {\n      super(injector);\n      this.accountService = accountService;\n      this.clipboard = clipboard;\n      this.columns = [{\n        columnDef: \"webConfig\",\n        header: \"URL Web Client\"\n      }, {\n        columnDef: \"adsLink\",\n        header: \"URL Ads\"\n      }, {\n        columnDef: \"adsBannerTitle\",\n        header: \"Ads Banner\"\n      }, {\n        columnDef: \"adsBannerContent\",\n        header: \"Ads Content\"\n      }, {\n        columnDef: \"createtime\",\n        header: \"Create Time\",\n        cellRenderer: data => {\n          if (data.createtime) {\n            return moment(data.createtime).format(\"DD/MM/YYYY HH:mm:ss\");\n          }\n\n          return `<div></div>`;\n        }\n      }, {\n        columnDef: \"option\",\n        header: \"Option\",\n        flex: 0.3\n      }];\n      this.rows = [];\n    }\n\n    ngOnInit() {\n      this.accountService.getListScript().subscribe(res => {\n        this.rows = res.reverse().map(row => {\n          var _a;\n\n          try {\n            row.cookie = JSON.parse((_a = row.cookie) !== null && _a !== void 0 ? _a : \"\");\n          } catch (e) {\n            row.cookie = {};\n          }\n\n          return row;\n        });\n      });\n    }\n\n    copyToClipboard(script) {\n      this.clipboard.copy(script);\n    }\n\n    viewDetail(row) {\n      this.showDialog(DetailComponent, {\n        width: \"60vw\",\n        data: row\n      });\n    }\n\n  }\n\n  ScriptsComponent.ɵfac = function ScriptsComponent_Factory(t) {\n    return new (t || ScriptsComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.AccountService), i0.ɵɵdirectiveInject(i2.Clipboard));\n  };\n\n  ScriptsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ScriptsComponent,\n    selectors: [[\"app-scripts\"]],\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 6,\n    vars: 4,\n    consts: [[1, \"p-6\", \"bg-card\", \"w-full\"], [1, \"text-3xl\", \"font-bold\"], [3, \"paginate\", \"columns\", \"rows\", \"rowTemplate\"], [\"rowTemplate\", \"\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [4, \"ngSwitchDefault\"], [\"mat-icon-button\", \"\", 3, \"click\"], [\"svgIcon\", \"heroicons_outline:clipboard-list\", \"title\", \"Copy Script to clipboard\", 1, \"icon-size-5\"], [\"svgIcon\", \"heroicons_outline:information-circle\", \"title\", \"View Detail\", 1, \"icon-size-5\"], [3, \"innerHTML\"]],\n    template: function ScriptsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2, \"SCRIPT HISTORY\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"app-data-table\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(4, ScriptsComponent_ng_template_4_Template, 3, 2, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(5);\n\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"paginate\", false)(\"columns\", ctx.columns)(\"rows\", ctx.rows)(\"rowTemplate\", _r0);\n      }\n    },\n    directives: [i3.DataTableComponent, i4.NgSwitch, i4.NgSwitchCase, i5.MatButton, i6.MatIcon, i4.NgSwitchDefault],\n    styles: [\"\"]\n  });\n  return ScriptsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}