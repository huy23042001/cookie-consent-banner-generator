{"ast":null,"code":"import { BaseComponent } from \"../../../core/base.component\";\nimport moment from \"moment\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../core/auth/account.service\";\nimport * as i2 from \"../../../layout/common/data-table/data-table.component\";\nexport let HistoryComponent = /*#__PURE__*/(() => {\n  class HistoryComponent extends BaseComponent {\n    constructor(injector, accountService) {\n      super(injector);\n      this.accountService = accountService;\n      this.columns = [{\n        columnDef: \"domainWeb\",\n        header: \"Domain Web\"\n      }, {\n        columnDef: \"ipClient\",\n        header: \"IP Client\"\n      }, {\n        columnDef: \"statusConsent\",\n        header: \"Consent Status\",\n        cellRenderer: data => {\n          if (data.statusConsent == 0) {\n            return `<div class=\"flex\"><div class=\"px-2 py-1 rounded bg-[#86f372ee]\">Accept All</div></div>`;\n          } else if (data.statusConsent == 1) {\n            return `<div class=\"flex\"><div class=\"px-2 py-1 rounded bg-[#86f372ee]\">Accept Customize</div></div>`;\n          } else {\n            return `<div class=\"flex\"><div class=\"px-2 py-1 rounded bg-[#ff527aee]\">Declined</div></div>`;\n          }\n        }\n      }, {\n        columnDef: \"cookieConfig\",\n        header: \"Cookie Config\",\n        cellRenderer: data => {\n          if (data.statusConsent != 2) {\n            let listCategory = \"\";\n\n            try {\n              const config = JSON.parse(data.config);\n              listCategory = Object.keys(config).filter(key => !config[key].disabled).join(\", \");\n            } catch (e) {\n              console.log(e);\n            }\n\n            return listCategory;\n          }\n\n          return \"\";\n        }\n      }, {\n        columnDef: \"timestamp\",\n        header: \"Time\",\n        cellRenderer: data => {\n          if (data.timestamp) {\n            return moment(data.timestamp).format(\"DD/MM/YYYY HH:mm:ss\");\n          }\n\n          return `<div></div>`;\n        }\n      }];\n      this.rows = [];\n    }\n\n    ngOnInit() {\n      this.accountService.getListConsent().subscribe(res => {\n        this.rows = res.reverse();\n      });\n    }\n\n  }\n\n  HistoryComponent.ɵfac = function HistoryComponent_Factory(t) {\n    return new (t || HistoryComponent)(i0.ɵɵdirectiveInject(i0.Injector), i0.ɵɵdirectiveInject(i1.AccountService));\n  };\n\n  HistoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HistoryComponent,\n    selectors: [[\"app-history\"]],\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 4,\n    vars: 3,\n    consts: [[1, \"p-6\", \"bg-card\", \"w-full\"], [1, \"text-3xl\", \"font-bold\"], [3, \"paginate\", \"columns\", \"rows\"]],\n    template: function HistoryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2, \"CONSENT HISTORY\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"app-data-table\", 2);\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"paginate\", false)(\"columns\", ctx.columns)(\"rows\", ctx.rows);\n      }\n    },\n    directives: [i2.DataTableComponent],\n    styles: [\"\"]\n  });\n  return HistoryComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}